<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>C++ – Fehlerbehandlung</title>
  <link rel="stylesheet" href="../../style.css">
  <style>
    .definition { padding:.75rem; border-left:4px solid #2b7cff; background:#f3f8ff; border-radius:4px; margin:.75rem 0; }
    .example { padding:.75rem; border-left:4px solid #2e9a6a; background:#f4fffa; border-radius:4px; margin:.75rem 0; }
    .note { padding:.75rem; border-left:4px solid #ff9800; background:#fff8f0; border-radius:4px; margin:.75rem 0; }
    .small { font-size:0.95rem; color:#444; }
    pre { background:#1e1e1e; color:#d4d4d4; padding:1rem; border-radius:4px; overflow-x:auto; font-size:0.95rem; }
    code { font-family: Consolas, monospace; }
  </style>
</head>

<body>

<nav>
  <a href="../../index.html">Startseite</a>
</nav>

<section>

<h1>Fehlerbehandlung in C++</h1>
<p class="small">
  Diese Lektion behandelt die Techniken zur Erkennung und Behandlung von Fehlern in C++.  
  Fokus liegt auf Ausnahmen (<code>exceptions</code>) und bewährten Vorgehensweisen.
</p>

<h2>1. Warum Fehlerbehandlung?</h2>
<div class="definition">
  Programme können zur Laufzeit auf unerwartete Zustände stoßen.  
  Fehlerbehandlung sorgt dafür, dass Programme kontrolliert reagieren, statt abzustürzen.
</div>

<ul>
  <li>Eingabefehler (falsche Dateinamen, ungültige Werte)</li>
  <li>Division durch Null</li>
  <li>Speicherprobleme</li>
  <li>Externe Ressourcen nicht verfügbar (Dateien, Netzwerke)</li>
</ul>

<h2>2. Fehler in C++</h2>
<div class="definition">
  Fehler können kategorisiert werden als:
</div>
<ul>
  <li><strong>Logische Fehler:</strong> Programm läuft, aber liefert falsche Ergebnisse</li>
  <li><strong>Laufzeitfehler:</strong> z.B. Division durch Null, Nullpointerzugriff</li>
  <li><strong>Syntaxfehler:</strong> Compile-Zeit Fehler, verhindert Übersetzung</li>
</ul>

<h2>3. Exceptions – Grundidee</h2>
<div class="definition">
  C++ verwendet <strong>Exceptions</strong> zur Behandlung von Laufzeitfehlern.
</div>

<ul>
  <li>Mit <code>throw</code> wird eine Ausnahme ausgelöst</li>
  <li>Mit <code>try</code> wird Code markiert, der Fehler auslösen kann</li>
  <li>Mit <code>catch</code> wird die Ausnahme abgefangen und behandelt</li>
</ul>

<div class="example">
  <pre><code>try {
    int a = 10, b = 0;
    if(b == 0) throw "Division durch Null!";
    int c = a / b;
} catch(const char* msg) {
    std::cerr &lt;&lt; "Fehler: " &lt;&lt; msg &lt;&lt; std::endl;
}</code></pre>
</div>

<h2>4. Exception-Klassen</h2>
<div class="definition">
  C++ bietet Standardklassen für Exceptions im Header <code>&lt;stdexcept&gt;</code>:
</div>

<ul>
  <li><code>std::exception</code> – Basisklasse aller Standard-Exceptions</li>
  <li><code>std::runtime_error</code> – allgemeiner Laufzeitfehler</li>
  <li><code>std::logic_error</code> – logische Fehler</li>
  <li><code>std::out_of_range</code> – Index außerhalb gültiger Bereiche</li>
</ul>

<div class="example">
  <pre><code>#include &lt;iostream&gt;
#include &lt;stdexcept&gt;

int main() {
    try {
        throw std::out_of_range("Index außerhalb");
    } catch(const std::out_of_range& e) {
        std::cerr &lt;&lt; "Caught exception: " &lt;&lt; e.what() &lt;&lt; std::endl;
    }
}</code></pre>
</div>

<h2>5. Benutzerdefinierte Exceptions</h2>
<div class="definition">
  Eigene Fehlerklassen können von <code>std::exception</code> abgeleitet werden.
</div>

<div class="example">
  <pre><code>class MyError : public std::exception {
    const char* what() const noexcept override {
        return "Mein eigener Fehler!";
    }
};

try {
    throw MyError();
} catch(const MyError& e) {
    std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
}</code></pre>
</div>

<h2>6. Best Practices</h2>
<ul>
  <li>Nur Ausnahmen für unerwartete, nicht triviale Fehler verwenden</li>
  <li>Ressourcen immer sauber freigeben (RAII-Prinzip)</li>
  <li>Smart Pointer helfen, Speicherlecks auch bei Exceptions zu vermeiden</li>
  <li>Catch-by-reference: <code>catch(const std::exception& e)</code></li>
  <li>Generell: <code>try/catch</code> so eng wie möglich halten</li>
</ul>

<h2>7. RAII (Resource Acquisition Is Initialization)</h2>
<div class="definition">
  Objekte verwalten Ressourcen so, dass beim Verlassen des Gültigkeitsbereichs automatisch aufgeräumt wird.
</div>

<div class="example">
  <pre><code>#include &lt;fstream&gt;
std::ifstream file("data.txt");
if(!file) throw std::runtime_error("Datei nicht gefunden");
// file wird beim Verlassen des Scope automatisch geschlossen</code></pre>
</div>

<h2>8. Zusammenfassung</h2>
<ul>
  <li>Fehlerbehandlung wichtig für stabile Programme</li>
  <li>Exceptions mit <code>try</code>, <code>throw</code>, <code>catch</code></li>
  <li>Standard- und benutzerdefinierte Exception-Klassen</li>
  <li>RAII und Smart Pointer sichern Ressourcen automatisch</li>
  <li>Fehler früh erkennen, korrekt behandeln, Speicherlecks vermeiden</li>
</ul>

</section>
</body>
</html>